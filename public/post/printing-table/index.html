<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.7.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Amit Levinson">

  
  
  
    
  
  <meta name="description" content="Aestheticaly printing descriptive categorical variables from your data">

  
  <link rel="alternate" hreflang="en-us" href="/post/printing-table/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/zenburn.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/zenburn.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,400i%7CKarla:400,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156329952-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           document.location = url;
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target);  
  }

  gtag('js', new Date());
  gtag('config', 'UA-156329952-1', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hudc5a425b3e555d4faa8838526864126b_16079_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hudc5a425b3e555d4faa8838526864126b_16079_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/post/printing-table/">

  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@Amit_Levinson">
  <meta property="twitter:creator" content="@Amit_Levinson">
  
  <meta property="og:site_name" content="Amit Levinson">
  <meta property="og:url" content="/post/printing-table/">
  <meta property="og:title" content="Printing your survey&#39;s categorical variables | Amit Levinson">
  <meta property="og:description" content="Aestheticaly printing descriptive categorical variables from your data"><meta property="og:image" content="/post/printing-table/featured.jpg">
  <meta property="twitter:image" content="/post/printing-table/featured.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-05-01T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-05-01T00:00:00&#43;00:00">
  

  


    






  






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/printing-table/"
  },
  "headline": "Printing your survey's categorical variables",
  
  "image": [
    "/post/printing-table/featured.jpg"
  ],
  
  "datePublished": "2020-05-01T00:00:00Z",
  "dateModified": "2020-05-01T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Amit Levinson"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Amit Levinson",
    "logo": {
      "@type": "ImageObject",
      "url": "img//"
    }
  },
  "description": "Aestheticaly printing descriptive categorical variables from your data"
}
</script>

  

  


  


  





  <title>Printing your survey&#39;s categorical variables | Amit Levinson</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Amit Levinson</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#talks"><span>Talks</span></a>
        </li>

        
        

      

        

        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>

  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Printing your survey&#39;s categorical variables</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    May 1, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    14 min read
  </span>
  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<style>
p.caption {
  font-size: 0.8em;
}
</style>
<p>This post is somewhat of a ~love post~ tribute to both the iteration abilities in R combined with the <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html"><code>KableExtra</code></a> package. I set myself several goals for my thesis, one of them is doing my survey analysis in something other than SPSS. I wanted to finish my Masters’ with some broader knowledge of statistical programs and dive a little more into coding. I started learning R nearly a year ago so that when the time comes - When my pilot and survey results come in - I can analyze it all in R.</p>
<p>The time came and I started to analyze the data in R. However, the problem was, That I wasn’t going to do an OK job. After discovering much of R’s abilities, I wasn’t going to let myself copy+paste. So I wrote a few functions, manipulated some of the work and then it was time to get out the big guns; well big guns at least for me.</p>
<div id="the-problem" class="section level3">
<h3>The Problem</h3>
<p>In my pilot survey I had several questions (~20) that were categorical, ordinal and were simple constructs that didn’t require a more thorough analysis such as reliability of the scale. I wanted to nicely print all of these variables in one table, address any anomalies if needed and have them in the appendix for my supervisors to review.</p>
<p><strong>The issue was, how can I nicely print all categorical variables along with the original question, the possible answers and the distribution of responses?</strong></p>
<p>First, let’s look at our data:</p>
<pre class="r"><code>library(tidyverse) # dplyr, tidyr, readr &amp; purrr
library(here) # Project management
library(readxl) # For reading excel files
library(knitr) # Printing tables
library(kableExtra) # Printing tables, but nice ones
library(janitor) # To clean names
library(scales)
df_survey &lt;- read_xlsx(here(&quot;content&quot;, &quot;post&quot;, &quot;printing-categorical-variables-questions-with-kableextra&quot;, &quot;data&quot;,&quot;survey.xlsx&quot;))

head(df_survey)</code></pre>
<pre><code>## # A tibble: 6 x 12
##   Q2     Q4     Q6     Q7    Q11_1   Q13_1   Q15   Q26   Q27   Q30   Q32   Q37  
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 Female Salar~ Simil~ Cent~ Once a~ At lea~ Never No    &lt;NA&gt;  &lt;NA&gt;  No    Yes  
## 2 Female Salar~ Below~ South Severa~ Every ~ Never No    &lt;NA&gt;  &lt;NA&gt;  No    Yes  
## 3 Female Stude~ Below~ South Betwee~ I&#39;ve n~ Never No    &lt;NA&gt;  &lt;NA&gt;  No    Yes  
## 4 Female Unemp~ Simil~ Cent~ Once a~ At lea~ Last~ No    &lt;NA&gt;  &lt;NA&gt;  No    Yes  
## 5 Male   Salar~ Simil~ Cent~ Once a~ At lea~ Last~ Yes   2-3 ~ Yes   No    No   
## 6 Female Salar~ Simil~ Cent~ Severa~ Last t~ Never No    &lt;NA&gt;  &lt;NA&gt;  No    Yes</code></pre>
<p>So we have a lot of information regarding our sample  data we collected. In order to nicely print all of our <em>character</em> columns, let’s start by removing anything other than a character column:</p>
<pre class="r"><code>df_char &lt;- df_survey %&gt;% 
  janitor::clean_names () %&gt;% 
  select_if(is.character) </code></pre>
<p>we’ll need to change the data to a long form. A first thought the comes to mind is to use the <code>pivot_longer</code> argument so that we have everything in one nice long table:</p>
<pre class="r"><code>df_long &lt;- df_char %&gt;% 
  pivot_longer(q2:q37, names_to = &quot;question&quot;) %&gt;% 
  count(question, value) %&gt;%
  group_by(question) %&gt;% 
  mutate(pct = percent(n/sum(n)))


kbl(df_long) %&gt;% 
  kable_styling() %&gt;% 
  scroll_box(height = &quot;450px&quot;)</code></pre>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:450px; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
question
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
value
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
n
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
pct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Between once a week to once in a month
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Less than once a month
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Once a day
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Once a week
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Several times a day
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Several times a week
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
23.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
About every week
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
At least once a month
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
38.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
Every three months
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
Every three to six months
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
I’ve never bought
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
Last time I bought was over half a year ago
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last half a year
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last month
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
5.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last three months
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last week
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last year
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Never
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Over a year ago
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
q2
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
q2
</td>
<td style="text-align:left;">
Male
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q26
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
59%
</td>
</tr>
<tr>
<td style="text-align:left;">
q26
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
38%
</td>
</tr>
<tr>
<td style="text-align:left;">
q26
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
3%
</td>
</tr>
<tr>
<td style="text-align:left;">
q27
</td>
<td style="text-align:left;">
2-3 times
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q27
</td>
<td style="text-align:left;">
5-7 times
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q27
</td>
<td style="text-align:left;">
Over 7 times
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
q27
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
61.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q30
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
3%
</td>
</tr>
<tr>
<td style="text-align:left;">
q30
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
35%
</td>
</tr>
<tr>
<td style="text-align:left;">
q30
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
62%
</td>
</tr>
<tr>
<td style="text-align:left;">
q32
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:left;">
79.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
q32
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
q32
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
5.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q37
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
q37
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
73.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
q37
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Salaried employee
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Self employed
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Student
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
23.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Student,Salaried employee
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Student,Unemployed
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Unemployed
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q6
</td>
<td style="text-align:left;">
Above average
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
q6
</td>
<td style="text-align:left;">
Below average
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
q6
</td>
<td style="text-align:left;">
Similar to average
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
38.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
q7
</td>
<td style="text-align:left;">
Center
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
q7
</td>
<td style="text-align:left;">
South
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<p>Great, this prints nicely, but we’re left with several issues to address:</p>
<p><strong>1. We’re missing the actual questions</strong> - Notice how we only have “q10_1” but not description of what the actual question or variable is.</p>
<p><strong>2. Questions were reorganized alphabetically</strong> - Once we ran the <code>pivot_longer</code> R sorted our dataframe alphabetically according to the question column, but we might want it ordered chronologically according to the survey. Of course this is contingent on your data, I wanted to present it aligned to the order of the survey questions.</p>
<p><strong>3. Some of the responses aren’t ordered</strong> - Notice how some of the responses are randomly ordered, when ideally we’d want them to be ordered by hierarchy. For example question XXXXX</p>
<p><strong>4. Remove duplicated information</strong> - Our column question, and if we add another with the text, will have duplicate information. While the value changes within questions, we don’t need to show it’s from that question only once. In addition, once we’ll add the question title it’ll be even more cluttered, so we’ll have to deal with that.</p>
<p>Let’s address these issues one by one.</p>
<p><br></p>
<div id="adding-information-to-our-questions" class="section level4">
<h4>Adding information to our questions</h4>
<p>When you download the survey data from Qualtrics you also receive it with the original questions. When I personally analyzed the data I removed it, but here it’s perfect for providing additional information. If you don’t have questions but variables, you can either skip this section or add information about the variables themselves.</p>
<p>To add the questions I found it pretty straight forward to just to combine the current data_long dataset with a dataset containing our questions. We’ll use a copy of the original survey data that only contains the questions, let’s have a look:</p>
<pre class="r"><code>df_questions &lt;- read_xlsx(here(&quot;content&quot;, &quot;post&quot;, &quot;printing-categorical-variables-questions-with-kableextra&quot;, &quot;data&quot;, &quot;questions.xlsx&quot;))
df_questions[,1:3]</code></pre>
<pre><code>## # A tibble: 1 x 3
##   Q2     Q4                   Q6                                                
##   &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                                             
## 1 Gender What&#39;s your occupat~ The average income for an individual is X, you&#39;re~</code></pre>
<p>Great, now let’s turn it to a long format so that each row is a question id with the details of it as a value. Then we can join it with our current dataset of answers:</p>
<pre class="r"><code>df_q_clean &lt;- df_questions %&gt;% 
  clean_names() %&gt;% 
  pivot_longer(cols = q2:q37, names_to = &quot;question&quot;, values_to = &quot;text&quot;) 

df_long_joined &lt;-  left_join(df_long, df_q_clean)

head(df_long_joined)</code></pre>
<pre><code>## # A tibble: 6 x 5
## # Groups:   question [1]
##   question value                            n pct   text                        
##   &lt;chr&gt;    &lt;chr&gt;                        &lt;int&gt; &lt;chr&gt; &lt;chr&gt;                       
## 1 q11_1    Between once a week to once~     5 14.7% Every how often do you cons~
## 2 q11_1    Less than once a month           4 11.8% Every how often do you cons~
## 3 q11_1    Once a day                       6 17.6% Every how often do you cons~
## 4 q11_1    Once a week                      4 11.8% Every how often do you cons~
## 5 q11_1    Several times a day              6 17.6% Every how often do you cons~
## 6 q11_1    Several times a week             8 23.5% Every how often do you cons~</code></pre>
<p>As you can see, our column text provides the same information across the same questions, which seems kind of redundant. We’ll keep it for now and address it soon when we turn to print our table.</p>
<p>Our next problem is that we want some of our questions to be organized not by the count or some randomness, but by hierarchy of the answer options. For example ‘a few times a day’, ‘Once a day’, ‘several times a week’ and so on has a hierarachal structure, also defined as an ordinal variable.</p>
<p>Personally, I don’t have a magical automated answer and would be glad to hear about other options you encountered or thought of. I thought of using factors to reorder the levels, but once I pivot my data into a long format the answers are again sorted alphabetically. Instead I decided to manually combine my current dataframe with an identical one I saved where I ranked each relevant ordinal question manually.</p>
<pre class="r"><code># Save the sorted response file and use that to rank
# write_csv(df_long_q_sorted, here(&quot;content&quot;, &quot;post&quot;, &quot;printing-categorical-variables-questions-with-kableextra&quot;, &quot;data&quot;, &quot;answers_hir.csv&quot;))

answer_hir &lt;- read_csv(here(&quot;content&quot;, &quot;post&quot;, &quot;printing-categorical-variables-questions-with-kableextra&quot;, &quot;data&quot;, &quot;answers_hir.csv&quot;))
head(answer_hir)</code></pre>
<pre><code>## # A tibble: 6 x 3
##   question value                      rank
##   &lt;chr&gt;    &lt;chr&gt;                     &lt;dbl&gt;
## 1 q2       Female                       NA
## 2 q2       Male                         NA
## 3 q4       Salaried employee            NA
## 4 q4       Self employed                NA
## 5 q4       Student                      NA
## 6 q4       Student,Salaried employee    NA</code></pre>
<p>Great, we have our new guide in which we ranked our questions. Notice how the first answers are <code>NA</code>, but that’s because it’s a nominal variable with no intrinsic hierarchy. Now Let’s use this dataframe to create a value to sort our answers by:</p>
<pre class="r"><code>df_long_ranked &lt;- left_join(x = df_long_joined, y = answer_hir) </code></pre>
<p>We’ll reorder by rank along with solving the next issu which is the way our questions are ordered. Basically, we want it to be ordered by the question value and not how it’s sorted alphabetically. For example, we’d like q_5 to appear before q11_1, similar to how it was laid out in the survey. I’ll apply some regex (regular expression) manipulation to capture only the numbers and use that to sort by.</p>
<p>Here it goes:</p>
<pre class="r"><code>df_long_q_sorted &lt;- df_long_ranked %&gt;% 
  mutate(q_num = str_remove_all(question, &quot;[a-z]&quot;),
    q_num = str_replace_all(q_num, &quot;_&quot;, &quot;.&quot;),
    q_num = str_remove(q_num, &quot;\\.$&quot;),
    q_num = as.numeric(q_num)) %&gt;% 
  group_by(question) %&gt;% 
  arrange(q_num, rank) %&gt;% 
  ungroup() %&gt;% 
  select(-c(q_num, rank)) %&gt;% 
  relocate(text, .after = question)

head(df_long_q_sorted)</code></pre>
<pre><code>## # A tibble: 6 x 5
##   question text                    value                         n pct  
##   &lt;chr&gt;    &lt;chr&gt;                   &lt;chr&gt;                     &lt;int&gt; &lt;chr&gt;
## 1 q2       Gender                  Female                       16 47.1%
## 2 q2       Gender                  Male                         18 52.9%
## 3 q4       What&#39;s your occupation? Salaried employee            18 52.9%
## 4 q4       What&#39;s your occupation? Self employed                 3 8.8% 
## 5 q4       What&#39;s your occupation? Student                       8 23.5%
## 6 q4       What&#39;s your occupation? Student,Salaried employee     3 8.8%</code></pre>
<p>Fantastic!</p>
<p>I found that first using the regex and then sorting by rank doesn’t properly work, so instead I implemented it along with sorting the questions. Again, if the order of questions and answers doesn’t matter in your data you can just skip past some of the stages.</p>
<p>Great, now we have all our data formatted properly, on to the printing!</p>
</div>
</div>
<div id="kableextra" class="section level3">
<h3>KableExtra</h3>
<p>In my initial round of exploring the pilot survey I used <code>{KableExtra}</code> and its powerful features. However, the package isn’t ideal when knitting to word, and it’s recommended to knit to Html and copy that into a word document. Despite the copy + paste, I found it to be a great approach, but you can also directly print to word using KableExtra or other formats formats [^1].</p>
<p>[^1] In a future blogpost I’ll explore the {formattable} package which works great when wanting to knit to a word output.</p>
<div id="html-output" class="section level5">
<h5>Html output</h5>
<p>As we saw earlier, the argument is pretty straight forward. We can address the redundant information we have - question and text column appearing with each answer - within the KableExtra arguments:</p>
<pre class="r"><code>df_long_q_sorted %&gt;% 
  kbl(col.names = c(&quot;Question&quot;, &quot;Text&quot;, &quot;Answer&quot;, &quot;n&quot;, &quot;%&quot;)) %&gt;% 
  kable_styling(full_width = F) %&gt;% 
  column_spec(1, bold = T) %&gt;% 
  collapse_rows(columns = c(1,2), valign = &quot;top&quot;) %&gt;% 
  kableExtra::scroll_box(height = &quot;450px&quot;)</code></pre>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:450px; ">
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Question
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Text
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Answer
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
n
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="2">
q2
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="2">
Gender
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="6">
q4
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="6">
What’s your occupation?
</td>
<td style="text-align:left;">
Salaried employee
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Self employed
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Student
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
23.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
Student,Salaried employee
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Student,Unemployed
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Unemployed
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="3">
q6
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
The average income for an individual is X, you’re income is:
</td>
<td style="text-align:left;">
Below average
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
Similar to average
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
38.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
Above average
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="2">
q7
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="2">
Where do you live in Israel
</td>
<td style="text-align:left;">
Center
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
South
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="7">
q11_1
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="7">
Every how often do you consume choclate?
</td>
<td style="text-align:left;">
Several times a day
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
Once a day
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
Several times a week
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
23.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
Once a week
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Between once a week to once in a month
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
Less than once a month
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="6">
q13_1
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="6">
Every how often do you buy choclate?
</td>
<td style="text-align:left;">
About every week
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
At least once a month
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
38.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
Every three months
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
Every three to six months
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Last time I bought was over half a year ago
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
I’ve never bought
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="7">
q15
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="7">
When did you last attend a party?
</td>
<td style="text-align:left;">
Last week
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Last month
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
5.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Last three months
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Last half a year
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Last year
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Over a year ago
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
Never
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="3">
q26
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Do you think 2020 was a good year?
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
59%
</td>
</tr>
<tr>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
38%
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
3%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="4">
q27
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
How many times did you decide to stay home instead of going out this year?
</td>
<td style="text-align:left;">
2-3 times
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
5-7 times
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
11.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Over 7 times
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
61.8%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="3">
q30
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Should Amit buy a new computer?
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
3%
</td>
</tr>
<tr>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
35%
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
62%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="3">
q32
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
&lt;U+05D4&gt;&lt;U+05D0&gt;&lt;U+05DD&gt; &lt;U+05D9&gt;&lt;U+05E6&gt;&lt;U+05D0&gt; &lt;U+05DC&gt;&lt;U+05DA&gt; &lt;U+05DC&gt;&lt;U+05E7&gt;&lt;U+05E0&gt;&lt;U+05D5&gt;&lt;U+05EA&gt; &lt;U+05E1&gt;&lt;U+05DE&gt;&lt;U+05D9&gt;&lt;U+05DD&gt; &lt;U+05E0&gt;&lt;U+05D5&gt;&lt;U+05E1&gt;&lt;U+05E4&gt;&lt;U+05D9&gt;&lt;U+05DD&gt; &lt;U+05E9&gt;&lt;U+05D0&gt;&lt;U+05D9&gt;&lt;U+05E0&gt;&lt;U+05DD&gt; &lt;U+05E7&gt;&lt;U+05E0&gt;&lt;U+05D0&gt;&lt;U+05D1&gt;&lt;U+05D9&gt;&lt;U+05E1&gt;?
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:left;">
79.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
5.9%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="3">
q37
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Would you like to participate in a follow up study?
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
73.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
</tbody>
</table>
</div>
<p>That easy? Yes!</p>
<p>The trick here that I love is collapsing the columns, an argument also common in other packages such as {formattable}. This makes printing in rmarkdown really easy and efficient, something I found lacking in other platforms I learned such as SPSS. If you want the table to be a little more formally formatted I recommend exploring aesthetic arguments such as <code>kable_classic</code>, <code>kable_minimal</code> and others from the <a href="http://haozhu233.github.io/kableExtra/awesome_table_in_html.html">KableExtra</a> family. Here’s a short example using the <code>kable_classic</code>:</p>
<pre class="r"><code>df_long_q_sorted %&gt;% 
  head(6) %&gt;% 
  kbl() %&gt;% 
  kable_styling(full_width = F) %&gt;% 
  column_spec(1, bold = T) %&gt;% 
  collapse_rows(columns = c(1,2), valign = &quot;top&quot;) %&gt;% 
  kable_classic(html_font = &quot;Roboto Condensed&quot;)</code></pre>
<table class="table lightable-classic" style="width: auto !important; margin-left: auto; margin-right: auto; font-family: Roboto Condensed; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
question
</th>
<th style="text-align:left;">
text
</th>
<th style="text-align:left;">
value
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:left;">
pct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="2">
q2
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="2">
Gender
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="4">
q4
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
What’s your occupation?
</td>
<td style="text-align:left;">
Salaried employee
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Self employed
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Student
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
23.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
Student,Salaried employee
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
</tbody>
</table>
</div>
<div id="wait-but-what-if-i-want-a-simple-table-in-word" class="section level5">
<h5>Wait, but what if I want a simple table in word?</h5>
<p>Let’s say you want a simple kable table when knitting in word, you can just add ‘df_print: kable’ to the YAML of your document. Alternatively, you can explore other options in the <a href="https://bookdown.org/yihui/rmarkdown/html-document.html#figure-options">Rmarkdown book</a>. This makes printing dataframes easy and elegant.</p>
<p>How do we remove the redundant information when printing? Just replace the duplicated values with an empty string:</p>
<pre class="r"><code>df_long_q_sorted %&gt;% 
  mutate(across(c(question, text), function(x) ifelse(duplicated(x), &quot; &quot;, x))) %&gt;% 
  select(`Question` = question, `Text` = text, `Value` = value, n, `%` = pct) %&gt;% 
  head(10) %&gt;% 
  kbl()</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
Question
</th>
<th style="text-align:left;">
Text
</th>
<th style="text-align:left;">
Value
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:left;">
%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
q2
</td>
<td style="text-align:left;">
Gender
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Male
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
What’s your occupation?
</td>
<td style="text-align:left;">
Salaried employee
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
52.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Self employed
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Student
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
23.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Student,Salaried employee
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Student,Unemployed
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Unemployed
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
q6
</td>
<td style="text-align:left;">
The average income for an individual is X, you’re income is:
</td>
<td style="text-align:left;">
Below average
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Similar to average
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
38.2%
</td>
</tr>
</tbody>
</table>
<p>Voila!</p>
<p>What I did was similar to the KableExtra argument. I first removed redundant text by using the <code>across</code> along with a conditional argument to remove duplicated text. Basically it reads as take anyone of the specified columns and pass it to a conditional statement that if true (if the word is duplicated), add a space character instead. In the above example I added <code>kbl</code> at the end, but as long as you specify in your YAML the <code>df_print: kable</code> there’s no need to add kbl everytime.</p>
</div>
<div id="right-to-left-languages" class="section level5">
<h5>Right-to-Left languages?</h5>
<p>I found it even more difficult knitting to word Hebrew characters, but works great when doing so to HTML. This working with html formats, at least on the knitting part, much more efficient. Here’s a short example, without the whole pre-processing, using some Hebrew questions:</p>
<pre class="r"><code>hebrew_example &lt;- read_xlsx(here(&quot;content&quot;, &quot;post&quot;, &quot;printing-categorical-variables-questions-with-kableextra&quot;, &quot;data&quot;, &quot;hebrew_example.xlsx&quot;))

# Read Hebrew
Sys.setlocale(&quot;LC_ALL&quot;, &quot;Hebrew&quot;)</code></pre>
<pre><code>## [1] &quot;LC_COLLATE=Hebrew_Israel.1255;LC_CTYPE=Hebrew_Israel.1255;LC_MONETARY=Hebrew_Israel.1255;LC_NUMERIC=C;LC_TIME=Hebrew_Israel.1255&quot;</code></pre>
<pre class="r"><code>hebrew_example %&gt;% 
  select(question, text, value, n, pct) %&gt;% 
  kable(col.names = c(&quot;Question&quot;, &quot;Text&quot;, &quot;Answer&quot;, &quot;n&quot;, &quot;%&quot;)) %&gt;% 
  kable_styling(full_width = F) %&gt;% 
  column_spec(1, bold = T) %&gt;% 
  collapse_rows(columns = c(1,2), valign = &quot;top&quot;) %&gt;% 
  kableExtra::scroll_box(height = &quot;450px&quot;)</code></pre>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:450px; ">
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Question
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Text
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Answer
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
n
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="2">
q2
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="2">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
0.471
</td>
</tr>
<tr>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0.529
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="6">
q4
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="6">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0.529
</td>
</tr>
<tr>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.088
</td>
</tr>
<tr>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0.235
</td>
</tr>
<tr>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;, &lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.088
</td>
</tr>
<tr>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;, &lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.029
</td>
</tr>
<tr>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.029
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: top !important;" rowspan="3">
q37
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt; &lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt; &lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt; &lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt; &lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;&lt;U+FFFD&gt;?
</td>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.176
</td>
</tr>
<tr>
<td style="text-align:left;">
&lt;U+FFFD&gt;&lt;U+FFFD&gt;
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
0.735
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.088
</td>
</tr>
</tbody>
</table>
</div>
<p>XXXXXXX</p>
<p>FIX HEBREW</p>
</div>
<div id="wrapping-up" class="section level4">
<h4>Wrapping up</h4>
<p>So this is how I approached the issue of providing a simple descriptive table of my categorical variables. While it was kind of tedious and some parts required manual work, you might not need all the stages such as reordering within variables or providing additional information to each one. I hope you were able to take something from this post, I certainly enjoyed working with the {KableExtra} package and look forward to sharing additional things I’ve learned while working on my thesis.</p>
<p>Now then, time to get back to writing!</p>
</div>
</div>

    </div>

    







<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/printing-table/&amp;text=Printing%20your%20survey&amp;#39;s%20categorical%20variables" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/printing-table/&amp;t=Printing%20your%20survey&amp;#39;s%20categorical%20variables" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Printing%20your%20survey&amp;#39;s%20categorical%20variables&amp;body=/post/printing-table/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/printing-table/&amp;title=Printing%20your%20survey&amp;#39;s%20categorical%20variables" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Printing%20your%20survey&amp;#39;s%20categorical%20variables%20/post/printing-table/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/printing-table/&amp;title=Printing%20your%20survey&amp;#39;s%20categorical%20variables" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  






  
  
  
    
  
  
  <div class="media author-card content-widget-hr">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hub71a408706e589f09faa92e611c4d1ab_121232_250x250_fill_q90_lanczos_center.jpg" alt="Photo of Amit Levinson">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/">Amit Levinson</a></h5>
      <h6 class="card-subtitle">Sociology MA student</h6>
      <p class="card-text">I&rsquo;m an avid R user interested in R analysis, visualizations, drug markets and political participation.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
    
    
    
    
    <li>
      <a href="mailto:amitlevinson1@gmail.com" >
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/Amit_Levinson" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/AmitLevinson" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/amit-levinson-b23851150" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://amitlevinson.com/cv/" target="_blank" rel="noopener">
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>









  
  



  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    

    
    

    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.e5c8525332f417fe3589df9a6b25b6c4.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/"></a>
    
    
       &middot; 
      <a href="/terms/"></a>
    
  </p>
  

 <p class="powered-by">
    © Amit Levinson 2020 &middot; 

    Made in <a href="https://cran.r-project.org/" target="_blank" rel="noopener"><i class="fab fa-r-project"></i></a> with <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a><a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener"> Academic theme</a>
 &#183; <a href="https://www.r-bloggers.com/" target="_blank" rel="noopener">R-Bloggers</a>

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
